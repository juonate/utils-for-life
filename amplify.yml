version: 1
frontend:
  appRoot: frontend
  phases:
    preBuild:
      commands:
        # Se indica al entorno que use Node.js 20, que es requerido por Angular 20.
        - nvm use 20
        # Se reemplaza 'npm ci' por 'npm install' para asegurar la instalación de devDependencies.
        - npm install
    build:
      commands:
        # Se ejecuta el build de Angular. npx encontrará el binario en node_modules.
        - npx ng build
  artifacts:
    # La ruta es ahora relativa al 'appRoot'
    baseDirectory: dist/utils-app
    files:
      - '**/*'
  cache:
    # La ruta es ahora relativa al 'appRoot'
    paths:
      - node_modules/**/*
