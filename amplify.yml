version: 1
frontend:
  appRoot: frontend
  phases:
    preBuild:
      commands:
        # Se indica al entorno que use Node.js 20, que es requerido por Angular 20.
        - nvm use 20
        # Se usa npm install para asegurar la instalación de todas las dependencias, incluidas las de desarrollo.
        - npm install
    build:
      commands:
        # Se ejecuta el binario de Angular CLI directamente desde la carpeta local node_modules.
        # Este es el método más robusto para asegurar que se usa el CLI del proyecto.
        - ./node_modules/.bin/ng build
  artifacts:
    # La ruta es ahora relativa al 'appRoot'.
    baseDirectory: dist/utils-app
    files:
      - '**/*'
  cache:
    # La ruta es ahora relativa al 'appRoot'.
    paths:
      - node_modules/**/*