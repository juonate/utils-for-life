version: 1
frontend:
  phases:
    preBuild:
      commands:
        # Se indica al entorno que use Node.js 20, que es requerido por Angular 20.
        - nvm use 20
        # Navegamos explícitamente a la carpeta del frontend.
        - cd frontend
        # Se usa npm install para asegurar la instalación de todas las dependencias, incluidas las de desarrollo.
        - npm install
    build:
      commands:
        # Navegamos de nuevo para asegurar que el contexto del directorio es correcto.
        - cd frontend
        - ./node_modules/.bin/ng build
  artifacts:
    # La ruta base ahora debe ser especificada desde la raíz del repositorio.
    baseDirectory: frontend/dist/utils-app
    files:
      - '**/*'
  cache:
    # La ruta del caché también debe ser especificada desde la raíz.
    paths:
      - frontend/node_modules/**/*