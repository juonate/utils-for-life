version: 1
frontend:
  appRoot: frontend
  phases:
    preBuild:
      commands:
        # Se indica al entorno que use Node.js 20, que es requerido por Angular 20.
        - nvm use 20
        # Se usa npm ci para una instalación limpia y rápida desde el lockfile.
        - npm ci
    build:
      commands:
        # Se instala explícitamente el Angular CLI y luego se ejecuta el build.
        - npm install @angular/cli
        - ./node_modules/.bin/ng build
  artifacts:
    # La ruta es ahora relativa al 'appRoot'
    baseDirectory: dist/utils-app
    files:
      - '**/*'
  cache:
    # La ruta es ahora relativa al 'appRoot'
    paths:
      - node_modules/**/*